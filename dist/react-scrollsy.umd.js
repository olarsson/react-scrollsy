(function(p,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("react"),require("react/jsx-runtime")):typeof define=="function"&&define.amd?define(["exports","react","react/jsx-runtime"],l):(p=typeof globalThis<"u"?globalThis:p||self,l(p["react-scrollsy"]={},p.React,p.jsxRuntime))})(this,function(p,l,k){"use strict";var y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function H(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var P={exports:{}};(function(e,n){(function(r){e.exports=r()})(function(){return function(){function r(o,t,i){function s(c,f){if(!t[c]){if(!o[c]){var d=typeof H=="function"&&H;if(!f&&d)return d(c,!0);if(a)return a(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var h=t[c]={exports:{}};o[c][0].call(h.exports,function(g){var w=o[c][1][g];return s(w||g)},h,h.exports,r,o,t,i)}return t[c].exports}for(var a=typeof H=="function"&&H,u=0;u<i.length;u++)s(i[u]);return s}return r}()({1:[function(r,o,t){o.exports=function(){if(typeof window>"u"||typeof navigator>"u")return function(){return 0};if(!navigator.userAgent.match(/iphone|ipod|ipad/i))return function(){return window.innerHeight};var i=Math.abs(window.orientation),s={w:0,h:0},a=function(){var u=document.createElement("div");u.style.position="fixed",u.style.height="100vh",u.style.width=0,u.style.top=0,document.documentElement.appendChild(u),s.w=i===90?u.offsetHeight:window.innerWidth,s.h=i===90?window.innerWidth:u.offsetHeight,document.documentElement.removeChild(u),u=null};return a(),function(){return Math.abs(window.orientation)!==90?s.h:s.w}}()},{}]},{},[1])(1)})})(P);var z=P.exports;const L=q(z);var E={},x={};Object.defineProperty(x,"__esModule",{value:!0});var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.throttle=void 0;function F(e,n){var r,o;return function(){var t=arguments,i=this;return r||(r=!0,setTimeout(function(){return r=!1},n),o=e.apply(i,t)),o}}b.throttle=F,function(e){var n=y&&y.__createBinding||(Object.create?function(o,t,i,s){s===void 0&&(s=i),Object.defineProperty(o,s,{enumerable:!0,get:function(){return t[i]}})}:function(o,t,i,s){s===void 0&&(s=i),o[s]=t[i]}),r=y&&y.__exportStar||function(o,t){for(var i in o)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&n(t,o,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(x,e),r(b,e)}(E);const j=(e,n)=>{let r,o;return function(...t){const i=this;o?(r&&clearTimeout(r),r=setTimeout(()=>{Date.now()-o>=n&&(e.apply(i,t),o=Date.now())},n-(Date.now()-o))):(e.apply(i,t),o=Date.now())}},I=()=>window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,S=e=>e.clientHeight;function A(e){return new Promise(n=>{if(document.querySelector(e))return n(document.querySelector(e));const r=new MutationObserver(()=>{document.querySelector(e)&&(n(document.querySelector(e)),r.disconnect())});r.observe(document.body,{childList:!0,subtree:!0})})}const _=(e,n)=>{if(!e||!n)throw"element/container is not defined.";const r=e.getBoundingClientRect(),o=n.scrollTop-n.offsetTop;return r.top+o},N=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,T=()=>N()?L():I(),U=function(e,n,r,o,t){let i=0,s=0,a=0,u=0,c=0;switch(t.basedOn){case"doc":i=n.scrollHeight-n.containerHeight;break;case"vp":i=n.containerHeight,s=_(e,n.element)-n.containerHeight;break;case"elem":i=e.getBoundingClientRect().bottom,s=_(e,n.element)-n.containerHeight;break}if(r){if(r.unit==="px")a=r.distance;else if(r.unit==="%")switch(r.basedOn){case"doc":a=n.scrollHeight*(r.distance/100);break;case"vp":a=n.containerHeight*(r.distance/100);break;case"elem":a=e.scrollHeight*(r.distance/100);break}}if(o){if(o.unit==="px")u=o.distance;else if(o.unit==="%")switch(o.basedOn){case"doc":u=n.scrollHeight*(o.distance/100);break;case"vp":u=n.containerHeight*(o.distance/100);break;case"elem":a=e.scrollHeight*(o.distance/100);break}}if(t.unit==="px"&&(c=t.distance),t.unit==="%")switch(t.basedOn){case"doc":c=i*(t.distance/100);break;case"vp":c=i*(t.distance/100);break;case"elem":c=e.scrollHeight*(t.distance/100);break}const f=s+a,d=s+c-u,m=(n.scrollTop-f)/(d-f);return{progress:Math.min(Math.max(m,0),1),scrollData:n,start:f,end:d}},C={resizeThrottle:150},M={progress:0,scrollData:{containerHeight:0,element:void 0,percentProgress:0,scrollHeight:0,scrollTop:0},start:0,end:0},R=(e,n=M)=>typeof e=="function"?e({scrollObject:n,children:e}):e,V=l.memo(({scrollData:e,children:n,elem:r,settings:o,onStart:t,onEnd:i})=>{const{offsetTop:s,offsetBottom:a,duration:u}=o,[c,f]=l.useState(!1),[d,m]=l.useState(!1),[h,g]=l.useState(!1);if(l.useEffect(()=>{c&&typeof t=="function"&&t()},[c]),l.useEffect(()=>{d&&typeof i=="function"&&i()},[d]),l.useEffect(()=>{r!=null&&r.current&&g(!0)},[r]),!h)return R(n,M);const w=U(r.current,e,s,a,u),{progress:v}=w;return v>0&&v<1&&c===!1&&typeof t=="function"&&f(!0),v<=0&&c===!0&&typeof t=="function"&&f(!1),v>=1&&d===!1&&typeof i=="function"&&m(!0),v<1&&d===!0&&typeof i=="function"&&m(!1),R(n,w)}),O=({scrollData:e,children:n})=>typeof n=="function"?n({scrollData:{scrollTop:e.scrollTop,scrollHeight:e.scrollHeight,containerHeight:e.containerHeight,percentProgress:e.percentProgress,element:e.element},children:n}):n,W=({children:e,scrollThrottle:n,resizeThrottle:r=C.resizeThrottle})=>{const o=document==null?void 0:document.documentElement;if(!o)throw new Error("No document.documentElement found.");if(typeof window>"u")throw new Error("No window found.");let t=null;const[i,s]=l.useState(T()),[a,u]=l.useState(0),c=()=>{t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame(()=>{const{scrollTop:h,scrollHeight:g}=o;u(h/(g-i))})},f=()=>{s(T())},d=E.throttle(()=>{f()},r),m=n?j(()=>{console.log("throttle scroll",n),c()},n):()=>{console.log("no throttled scroll"),c()};return l.useEffect(()=>(window.addEventListener("resize",d),s(T()),f(),()=>{window.removeEventListener("resize",d)}),[]),l.useEffect(()=>(document.addEventListener("scroll",m,{passive:!0}),m(),()=>{document.removeEventListener("scroll",m)}),[i]),O({scrollData:{scrollTop:o.scrollTop,scrollHeight:o.scrollHeight,containerHeight:i,percentProgress:a,element:o},children:e})},$=({children:e,scrollThrottle:n,scrollingElement:r,resizeThrottle:o})=>{const[t,i]=l.useState(!1),[s,a]=l.useState(null),u=O({scrollData:{scrollTop:0,scrollHeight:0,containerHeight:0,percentProgress:0,element:document.documentElement},children:e});return A(r).then(c=>{s||(a(c),i(!0))}),t?k.jsx(G,{scrollThrottle:n,resizeThrottle:o,customScrollingElement:s,children:e}):u},G=({children:e,customScrollingElement:n,scrollThrottle:r,resizeThrottle:o=C.resizeThrottle})=>{const t=n;if(!t)throw new Error("No custom scrolling element found.");if(typeof window>"u")throw new Error("No window found.");let i=null;const[s,a]=l.useState(S(t)),[u,c]=l.useState(0),f=()=>{i&&window.cancelAnimationFrame(i),i=window.requestAnimationFrame(()=>{const{scrollTop:g,scrollHeight:w}=t;c(g/(w-s))})},d=()=>{a(S(t))},m=E.throttle(()=>{d()},o),h=r?j(()=>{console.log("custom throttle scroll",r),f()},r):()=>{console.log("custom no throttled scroll"),f()};return l.useEffect(()=>(window.addEventListener("resize",m),a(S(t)),d(),()=>{window.removeEventListener("resize",m)}),[]),l.useEffect(()=>(t.addEventListener("scroll",h,{passive:!0}),h(),()=>{t.removeEventListener("scroll",h)}),[s]),O({scrollData:{scrollTop:t.scrollTop,scrollHeight:t.scrollHeight,containerHeight:s,percentProgress:u,element:t},children:e})};p.ScrollTracker=V,p.ScrollTrackerCustom=$,p.ScrollTrackerDocument=W,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});
